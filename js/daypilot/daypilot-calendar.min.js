/*
DayPilot Lite
Copyright (c) 2005 - 2014 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 111
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Calendar!=='undefined'){return;};function loadDefaultCss(){if(DayPilot.Global.defaultCalendarCss){return;};var $b=DayPilot.sheet();$b.add(".calendar_default_main","border: 1px solid #999;font-family: Tahoma, Arial, sans-serif; font-size: 12px;");$b.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #666;background: #eee;");$b.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;	border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;");$b.add(".calendar_default_colheader_inner","text-align: center; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;");$b.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff");$b.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_message","opacity: 0.9;filter: alpha(opacity=90);	padding: 10px; color: #ffffff;background: #ffa216;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'color: #666; border: 1px solid #999;');$b.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;");$b.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");');$b.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;");$b.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;padding: 2px;margin-right: 1px;font-size: 12px;");$b.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;");$b.add(".calendar_default_event","cursor: default;");$b.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;font-size: 12px;");$b.add(".calendar_default_shadow_inner","background-color: #666666;	opacity: 0.5;filter: alpha(opacity=50);height: 100%;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;");$b.commit();DayPilot.Global.defaultCalendarCss=true;};var DayPilotCalendar={};DayPilotCalendar.selectedCells=[];DayPilotCalendar.topSelectedCell=null;DayPilotCalendar.bottomSelectedCell=null;DayPilotCalendar.selecting=false;DayPilotCalendar.column=null;DayPilotCalendar.firstSelected=null;DayPilotCalendar.firstMousePos=null;DayPilotCalendar.originalMouse=null;DayPilotCalendar.originalHeight=null;DayPilotCalendar.originalTop=null;DayPilotCalendar.resizing=null;DayPilotCalendar.globalHandlers=false;DayPilotCalendar.moving=null;DayPilotCalendar.register=function($c){if(!DayPilotCalendar.registered){DayPilotCalendar.registered=[];};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){if(r[i]===$c){return;}};r.push($c);};DayPilotCalendar.unregister=function($c){var a=DayPilotCalendar.registered;if(!a){return;};var i=DayPilot.indexOf(a,$c);if(i===-1){return;};a.splice(i,1);};DayPilotCalendar.getCellsAbove=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.previousSibling;while(tr&&tr.tagName!=="TR"){tr=tr.previousSibling;}};return $e;};DayPilotCalendar.getCellsBelow=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.nextSibling;while(tr&&tr.tagName!=="TR"){tr=tr.nextSibling;}};return $e;};DayPilotCalendar.getColumn=function($d){var i=0;while($d.previousSibling){$d=$d.previousSibling;if($d.tagName==="TD"){i++;}};return i;};DayPilotCalendar.gUnload=function(ev){if(!DayPilotCalendar.registered){return;};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){var c=r[i];c.dispose();DayPilotCalendar.unregister(c);}};DayPilotCalendar.gMouseUp=function(e){if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;return;};var $g=DayPilotCalendar.resizing.event;var $h=DayPilotCalendar.resizingShadow.clientHeight+4;var top=DayPilotCalendar.resizingShadow.offsetTop;var $i=DayPilotCalendar.resizing.dpBorder;DayPilotCalendar.deleteShadow(DayPilotCalendar.resizingShadow);DayPilotCalendar.resizingShadow=null;DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;$g.calendar.eventResizeDispatch($g,$h,top,$i);}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.moving=null;document.body.style.cursor='default';return;};var top=DayPilotCalendar.movingShadow.offsetTop;DayPilotCalendar.deleteShadow(DayPilotCalendar.movingShadow);var $g=DayPilotCalendar.moving.event;var $j=DayPilotCalendar.movingShadow.column;DayPilotCalendar.moving=null;DayPilotCalendar.movingShadow=null;document.body.style.cursor='default';var ev=e||window.event;$g.calendar.eventMoveDispatch($g,$j,top,ev);}};DayPilotCalendar.deleteShadow=function($k){if(!$k){return;};if(!$k.parentNode){return;};$k.parentNode.removeChild($k);};DayPilotCalendar.moveShadow=function($l){var $k=DayPilotCalendar.movingShadow;var parent=$k.parentNode;parent.style.display='none';$k.parentNode.removeChild($k);$l.firstChild.appendChild($k);$k.style.left='0px';parent.style.display='';$k.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};DayPilotCalendar.Calendar=function(id){var $m=false;if(this instanceof DayPilotCalendar.Calendar&&!this.$1z){$m=true;this.$1z=true;};if(!$m){throw "DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";};var $c=this;this.uniqueID=null;this.v='111';this.id=id;this.clientName=id;this.cache={};this.cache.pixels={};this.elements={};this.elements.events=[];this.nav={};this.afterRender=function(){};this.fasterDispose=true;this.api=2;this.borderColor="#CED2CE";this.businessBeginsHour=9;this.businessEndsHour=18;this.cellBackColor="#ffffff";this.cellBorderColor="#DEDFDE";this.cellHeight=20;this.columnMarginRight=5;this.cornerBackColor="#F3F3F9";this.cssOnly=true;this.cssClassPrefix="calendar_default";this.days=1;this.eventBackColor='#638EDE';this.eventBorderColor="#2951A5";this.eventFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventFontSize='8pt';this.eventFontColor="#ffffff";this.eventHeaderFontSize='8pt';this.eventHeaderFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventHeaderFontColor="#ffffff";this.eventHeaderHeight=14;this.eventHeaderVisible=true;this.headerFontSize='10pt';this.headerFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.headerFontColor="#42658C";this.headerHeight=20;this.height=300;this.heightSpec='BusinessHours';this.hideUntilInit=true;this.hourHalfBorderColor="#EBEDEB";this.hourBorderColor="#DEDFDE";this.hourFontColor="#42658C";this.hourFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.hourFontSize="16pt";this.hourNameBackColor="#F3F3F9";this.hourNameBorderColor="#DEDFDE";this.hourWidth=45;this.initScrollPos=0;this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.loadingLabelBackColor="ff0000";this.loadingLabelFontColor="#ffffff";this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.loadingLabelFontSize="10pt";this.selectedColor="#316AC5";this.showToolTip=true;this.startDate=new DayPilot.Date().getDatePart();this.timeFormat='Clock12Hours';this.timeRangeSelectedHandling='Enabled';this.eventClickHandling='Enabled';this.eventResizeHandling='Update';this.eventMoveHandling='Update';this.clearSelection=function(){for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d){if($d.selected){$d.removeChild($d.selected);$d.firstChild.style.display='';$d.selected=null;}}}};this.ie=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);this.ff=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1);this.opera105=(function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=10.5;};return false;})();this.webkit522=(function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=522;};return false;})();this.ie9=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE 9")!==-1);this.cleanSelection=this.clearSelection;this.callBack2=function($n,$o,$p){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.callbackTimeout=window.setTimeout(function(){$c.loadingStart();},100);var $q={};$q.action=$n;$q.parameters=$p;$q.data=$o;$q.header=this.getCallBackHeader();var $r="JSON"+DayPilot.JSON.stringify($q);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$r,this.ajaxError);}};this.dispose=function(){var c=$c;c.deleteEvents();c.nav.zoom.onmousemove=null;c.nav.scroll.root=null;DayPilot.pu(c.nav.loading);c.disposeMain();c.disposeHeader();c.nav.select=null;c.nav.cornerRight=null;c.nav.scrollable=null;c.nav.zoom=null;c.nav.loading=null;c.nav.header=null;c.nav.hourTable=null;c.nav.scrolltop=null;c.nav.scroll=null;c.nav.main=null;c.nav.message=null;c.nav.messageClose=null;c.nav.top=null;DayPilotCalendar.unregister(c);};this.registerDispose=function(){var $s=document.getElementById(id);$s.dispose=this.dispose;};this.callBackResponse=function($t){$c.updateView($t.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpc";h.id=this.id;h.v=this.v;h.days=$c.days;h.startDate=$c.startDate;h.heightSpec=$c.heightSpec;h.businessBeginsHour=$c.businessBeginsHour;h.businessEndsHour=$c.businessEndsHour;h.backColor=$c.cellBackColor;h.timeFormat=$c.timeFormat;h.viewType=$c.viewType;h.locale=$c.locale;return h;};this.createShadow=function($u,$v){var $w=$u.parentNode;while($w&&$w.tagName!=="TD"){$w=$w.parentNode;};var $k=document.createElement('div');$k.setAttribute('unselectable','on');$k.style.position='absolute';$k.style.width=($u.offsetWidth-4)+'px';$k.style.height=($u.offsetHeight-4)+'px';$k.style.left=($u.offsetLeft)+'px';$k.style.top=($u.offsetTop)+'px';$k.style.border='2px dotted #666666';$k.style.zIndex=101;$k.style.backgroundColor="#aaaaaa";$k.style.opacity=0.5;$k.style.filter="alpha(opacity=50)";$k.style.border='2px solid #aaaaaa';if($v){$k.style.overflow='hidden';$k.style.fontSize=$u.style.fontSize;$k.style.fontFamily=$u.style.fontFamily;$k.style.color=$u.style.color;$k.innerHTML=$u.data.client.html();};$k.style.MozBorderRadius="5px";$k.style.webkitBorderRadius="5px";$k.style.borderRadius="5px";$w.firstChild.appendChild($k);return $k;};this.$1A={};this.$1A.locale=function(){var $x=DayPilot.Locale.find($c.locale);if(!$x){return DayPilot.Locale.US;};return $x;};var $y=this.$1A;this.updateView=function($z,$A){var $z=eval("("+$z+")");if($z.CallBackRedirect){document.location.href=$z.CallBackRedirect;return;};if($z.UpdateType==="None"){$c.loadingStop();$c.show();return;};$c.deleteEvents();if($z.UpdateType==="Full"){$c.columns=$z.Columns;$c.days=$z.Days;$c.startDate=new DayPilot.Date($z.StartDate);$c.heightSpec=$z.HeightSpec?$z.HeightSpec:$c.heightSpec;$c.businessBeginsHour=$z.BusinessBeginsHour?$z.BusinessBeginsHour:$c.businessBeginsHour;$c.businessEndsHour=$z.BusinessEndsHour?$z.BusinessEndsHour:$c.businessEndsHour;$c.viewType=$z.ViewType;$c.backColor=$z.BackColor?$z.BackColor:$c.backColor;$c.eventHeaderVisible=$z.EventHeaderVisible?$z.EventHeaderVisible:$c.eventHeaderVisible;$c.timeFormat=$z.TimeFormat?$z.TimeFormat:$c.timeFormat;$c.locale=$z.Locale?$z.Locale:$c.locale;$c.prepareColumns();};$c.loadEvents($z.Events);$c.updateHeaderHeight();if($z.UpdateType==="Full"){$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.show();$c.drawEvents();$c.clearSelection();$c.afterRender($z.CallBackData,true);$c.loadingStop();};this.$=function($B){return document.getElementById(id+"_"+$B);};this.durationHours=function(){return 24;};this.businessHoursSpan=function(){if(this.businessBeginsHour>this.businessEndsHour){return 24-this.businessBeginsHour+this.businessEndsHour;}else{return this.businessEndsHour-this.businessBeginsHour;}};this.rowCount=function(){return 48;};this.$1B=function(){return $c.api===2;};this.eventClickCallBack=function(e,$o){this.callBack2('EventClick',$o,e);};this.eventClickDispatch=function(e){var $C=this;var e=$C.event;if($c.$1B()){var $D={};$D.e=e;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventClick==='function'){$c.onEventClick($D);if($D.preventDefault.value){return;}};switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;};if(typeof $c.onEventClicked==='function'){$c.onEventClicked($D);}}else{switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;case 'JavaScript':$c.onEventClick(e);break;}}};this.eventResizeCallBack=function(e,$E,$F,$o){if(!$E)throw 'newStart is null';if(!$F)throw 'newEnd is null';var $G={};$G.e=e;$G.newStart=$E;$G.newEnd=$F;this.callBack2('EventResize',$o,$G);};this.eventResizeDispatch=function(e,$H,$I,$i){var $J=1;var $E=new Date();var $F=new Date();var $K=e.start();var end=e.end();var $L=new Date();var $M=$c.columns[e.part.dayIndex].Start;$L=end.getDatePart();var $N=Math.floor(($I+$H-$J)/$c.cellHeight);var $O=$N*30;var ts=$O*60*1000;$E=$K;$F=$M.addTime(ts);if($c.$1B()){var $D={};$D.e=e;$D.newStart=$E;$D.newEnd=$F;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventResize==='function'){$c.onEventResize($D);if($D.preventDefault.value){return;}};switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$E,$F);break;case 'Update':e.start($E);e.end($F);$c.events.update(e);break;};if(typeof $c.onEventResized==='function'){$c.onEventResized($D);}}else{switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$E,$F);break;case 'JavaScript':$c.onEventResize(e,$E,$F);break;}}};this.eventMoveCallBack=function(e,$E,$F,$P,$o){if(!$E)throw 'newStart is null';if(!$F)throw 'newEnd is null';var $G={};$G.e=e;$G.newStart=$E;$G.newEnd=$F;this.callBack2('EventMove',$o,$G);};this.eventMoveDispatch=function(e,$j,$I,ev){var $J=1;var $N=Math.floor(($I-$J)/$c.cellHeight);var $Q=$N*30*60*1000;var $K=e.start();var end=e.end();var $L=new Date();if($K.isDayPilotDate){$K=$K.d;};$L.setTime(Date.UTC($K.getUTCFullYear(),$K.getUTCMonth(),$K.getUTCDate()));var $R=$K.getTime()-($L.getTime()+$K.getUTCHours()*3600*1000+Math.floor($K.getUTCMinutes()/30)*30*60*1000);var length=end.getTime()-$K.getTime();var $S=this.columns[$j];var $T=$S.Start.getTime();var $U=new Date();$U.setTime($T+$Q+$R);var $E=new DayPilot.Date($U);var $F=$E.addTime(length);if($c.$1B()){var $D={};$D.e=e;$D.newStart=$E;$D.newEnd=$F;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventMove==='function'){$c.onEventMove($D);if($D.preventDefault.value){return;}};switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$E,$F,$S.Value);break;case 'Update':e.start($E);e.end($F);$c.events.update(e);break;};if(typeof $c.onEventMoved==='function'){$c.onEventMoved($D);}}else{switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$E,$F,$S.Value);break;case 'JavaScript':$c.onEventMove(e,$E,$F,$S.Value,false);break;}}};this.timeRangeSelectedCallBack=function($K,end,$V,$o){var $W={};$W.start=$K;$W.end=end;this.callBack2('TimeRangeSelected',$o,$W);};this.timeRangeSelectedDispatch=function($K,end){$K=new DayPilot.Date($K);end=new DayPilot.Date(end);if(this.$1B()){var $D={};$D.start=$K;$D.end=end;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onTimeRangeSelect==='function'){$c.onTimeRangeSelect($D);if($D.preventDefault.value){return;}};switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($K,end);break;};if(typeof $c.onTimeRangeSelected==='function'){$c.onTimeRangeSelected($D);}}else{switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($K,end);break;case 'JavaScript':$c.onTimeRangeSelected($K,end);break;}}};this.onCellMousedown=function(ev){if(DayPilotCalendar.selecting){return;};if($c.timeRangeSelectedHandling==="Disabled"){return;};var $X=(window.event)?window.event.button:ev.which;if($X!==1&&$X!==0){return;};DayPilotCalendar.firstMousePos=DayPilot.mc(ev||window.event);DayPilotCalendar.selecting=true;if(DayPilotCalendar.selectedCells){$c.clearSelection();DayPilotCalendar.selectedCells=[];};DayPilotCalendar.column=DayPilotCalendar.getColumn(this);DayPilotCalendar.selectedCells.push(this);DayPilotCalendar.firstSelected=this;DayPilotCalendar.topSelectedCell=this;DayPilotCalendar.bottomSelectedCell=this;$c.activateSelection();};this.activateSelection=function(){var $Y=this.getSelection();for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d&&!$d.selected){var $Z=document.createElement("div");$Z.style.height=($c.cellHeight-1)+"px";$Z.style.backgroundColor=$c.selectedColor;$d.firstChild.style.display="none";$d.insertBefore($Z,$d.firstChild);$d.selected=$Z;}}};this.mousemove=function(ev){if(typeof(DayPilotCalendar)==='undefined'){return;};if(!DayPilotCalendar.selecting){return;};var $00=DayPilot.mc(ev||window.event);var $01=DayPilotCalendar.getColumn(this);if($01!==DayPilotCalendar.column){return;};$c.clearSelection();if($00.y<DayPilotCalendar.firstMousePos.y){DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsBelow(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.selectedCells[0];DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.firstSelected;}else{DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsAbove(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.firstSelected;DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.selectedCells[0];};$c.activateSelection();};this.getSelection=function(){var $K=DayPilotCalendar.topSelectedCell.start;var end=DayPilotCalendar.bottomSelectedCell.end;return new DayPilot.Selection($K,end,null,$c);};this.mouseup=function(ev){if(DayPilotCalendar.selecting&&DayPilotCalendar.topSelectedCell!==null){DayPilotCalendar.selecting=false;var $02=$c.getSelection();$c.timeRangeSelectedDispatch($02.start,$02.end);if($c.timeRangeSelectedHandling!=="Hold"&&$c.timeRangeSelectedHandling!=="HoldForever"){$a();}}else{DayPilotCalendar.selecting=false;}};this.prepareColumns=function(){this.columns=this.$1C();for(var i=0;i<this.columns.length;i++){this.activateColumn(this.columns[i]);}};this.activateColumn=function($l){$l.Start=new DayPilot.Date($l.Start);$l.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $03=this.blocks[i];if($03.overlapsWith(ep.Top,ep.Height)){$03.events.push(ep);$03.min=Math.min($03.min,ep.Top);$03.max=Math.max($03.max,ep.Top+ep.Height);return i;}};var $03=[];$03.lines=[];$03.events=[];$03.overlapsWith=function($K,$04){var end=$K+$04-1;if(!(end<this.min||$K>this.max-1)){return true;};return false;};$03.putIntoLine=function(ep){var $05=this;for(var i=0;i<this.lines.length;i++){var $06=this.lines[i];if($06.isFree(ep.Top,ep.Height)){$06.push(ep);return i;}};var $06=[];$06.isFree=function($K,$04){var end=$K+$04-1;var $07=this.length;for(var i=0;i<$07;i++){var e=this[i];if(!(end<e.Top||$K>e.Top+e.Height-1)){return false;}};return true;};$06.push(ep);this.lines.push($06);return this.lines.length-1;};$03.events.push(ep);$03.min=ep.Top;$03.max=ep.Top+ep.Height;this.blocks.push($03);return this.blocks.length-1;};$l.putIntoLine=function(ep){var $05=this;for(var i=0;i<this.lines.length;i++){var $06=this.lines[i];if($06.isFree(ep.Top,ep.Height)){$06.push(ep);return i;}};var $06=[];$06.isFree=function($K,$04){var end=$K+$04-1;var $07=this.length;for(var i=0;i<$07;i++){var e=this[i];if(!(end<e.Top||$K>e.Top+e.Height-1)){return false;}};return true;};$06.push(ep);this.lines.push($06);return this.lines.length-1;};};this.$1C=function(){var $08=[];var $K=this.startDate.getDatePart();var $09=this.days;switch(this.viewType){case "Day":$09=1;break;case "Week":$09=7;$K=$K.firstDayOfWeek($y.locale().weekStarts);break;case "WorkWeek":$09=5;$K=$K.firstDayOfWeek(1);break;};if(this.heightSpec==='BusinessHoursNoScroll'){$K=$K.addHours(this.businessBeginsHour);};for(var i=0;i<$09;i++){var $l={};$l.Start=$K.addDays(i);$l.Name=$l.Start.toString($y.locale().datePattern);$l.InnerHTML=$l.Name;$08.push($l);};return $08;};this.$1D=function($0a){var $0b=this.theme||this.cssClassPrefix;if($0b){return $0b+$0a;}else{return "";}};this.deleteEvents=function(){if(this.elements.events){for(var i=0;i<this.elements.events.length;i++){var $Z=this.elements.events[i];var $u=$Z.event;if($u){$u.calendar=null;};$Z.onclick=null;$Z.onclickSave=null;$Z.onmouseover=null;$Z.onmouseout=null;$Z.onmousemove=null;$Z.onmousedown=null;if($Z.firstChild&&$Z.firstChild.firstChild&&$Z.firstChild.firstChild.tagName&&$Z.firstChild.firstChild.tagName.toUpperCase()==='IMG'){var $0c=$Z.firstChild.firstChild;$0c.onmousedown=null;$0c.onmousemove=null;$0c.onclick=null;};$Z.helper=null;$Z.data=null;$Z.event=null;DayPilot.de($Z);}};this.elements.events=[];};this.drawEvent=function($o){var $0d=this.nav.events;var $0e=true;var $0f=true;var $0g=false;var $0h=this.eventBorderColor;var $Z=document.createElement("div");$Z.style.position='absolute';$Z.style.left=$o.part.left+'%';$Z.style.top=($o.part.top)+'px';$Z.style.width=$o.part.width+'%';$Z.style.height=Math.max($o.part.height,2)+'px';$Z.style.overflow='hidden';$Z.data=$o;$Z.event=$o;$Z.unselectable='on';$Z.style.MozUserSelect='none';$Z.style.KhtmlUserSelect='none';if(!this.cssOnly){$Z.style.fontFamily=this.eventFontFamily;$Z.style.fontSize=this.eventFontSize;$Z.style.color=this.eventFontColor;if(!$0e){$Z.style.backgroundColor=$0h;}}else{$Z.className=this.$1D("_event");};$Z.isFirst=$o.part.start.getTime()===$o.start().getTime();$Z.isLast=$o.part.end.getTime()===$o.end().getTime();$Z.onclick=this.eventClickDispatch;$Z.onmousemove=function(ev){var $0i=5;var $0j=$c.eventHeaderVisible?($c.eventHeaderHeight):10;if(typeof(DayPilotCalendar)==='undefined'){return;};var $0k=DayPilot.mo3($Z,ev);if(!$0k){return;};if(DayPilotCalendar.resizing||DayPilotCalendar.moving){return;};var $0l=this.isLast;if($0k.y<=$0j&&$c.eventResizeHandling!=='Disabled'){this.style.cursor="n-resize";this.dpBorder='top';}else if(this.offsetHeight-$0k.y<=$0i&&$c.eventResizeHandling!=='Disabled'){if($0l){this.style.cursor="s-resize";this.dpBorder='bottom';}else{this.style.cursor='not-allowed';}}else if(!DayPilotCalendar.resizing&&!DayPilotCalendar.moving){if($c.eventClickHandling!=='Disabled'){this.style.cursor='pointer';}else{this.style.cursor='default';}}};$Z.onmousedown=function(ev){ev=ev||window.event;var $X=ev.which||ev.button;if((this.style.cursor==='n-resize'||this.style.cursor==='s-resize')&&$X===1){DayPilotCalendar.resizing=this;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalHeight=this.offsetHeight;DayPilotCalendar.originalTop=this.offsetTop;}else if($X===1&&this.eventMoveHandling!=='Disabled'){DayPilotCalendar.moving=this;DayPilotCalendar.moving.event=this.event;var $0m=DayPilotCalendar.moving.helper={};$0m.oldColumn=$c.columns[this.data.part.dayIndex].Value;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalTop=this.offsetTop;var $0k=DayPilot.mo3(this,ev);if($0k){DayPilotCalendar.moveOffsetY=$0k.y;}else{DayPilotCalendar.moveOffsetY=0;};document.body.style.cursor='move';};return false;};if(!this.cssOnly){var $0n=[];$0n.push("<div");if(this.showToolTip){$0n.push(" title='");$0n.push($o.client.toolTip().replace(/'/g,"&apos;"));$0n.push("'");};var $h=Math.max($o.part.height-2,0);$0n.push(" class='");$0n.push("'");if($0g){$0n.push(" style='margin-top:1px;height:");$0n.push($h-2);}else{$0n.push(" style='margin-top:0px;height:");$0n.push($h);};$0n.push("px;background-color:");$0n.push(this.eventBackColor);if($0f){$0n.push(";border:1px solid ");$0n.push($0h);$0n.push(";-moz-border-radius:5px;");$0n.push(";-webkit-border-radius:5px;");$0n.push(";border-radius:5px;");}else{$0n.push(";border-left:1px solid ");$0n.push($0h);$0n.push(";border-right:1px solid ");$0n.push($0h);};$0n.push(";");$0n.push("' unselectable='on'>");var $0o=this.eventHeaderVisible?this.eventHeaderHeight:0;if(this.eventHeaderVisible){var $0p="";var $0q=$o.start().getHours();var am=$0q<12;var $0r=$o.start().getMinutes();if(this.timeFormat==="Clock12Hours"){$0q=$0q%12;if($0q===0){$0q=12;};$0p=am?"am":"pm";};if($0r<10){$0r="0"+$0r;};var $0s=$0q+":"+$0r+$0p;$0n.push("<div unselectable='on' style='overflow:hidden;height:");$0n.push(this.eventHeaderHeight);$0n.push("px; background-color:");$0n.push($0h);$0n.push(";font-size:");$0n.push(this.eventHeaderFontSize);$0n.push(";color:");$0n.push(this.eventHeaderFontColor);$0n.push("'>");$0n.push($0s);$0n.push("</div>");};$0n.push("<div unselectable='on' style='overflow:hidden;padding-left:2px;height:");$0n.push($h-$0o-1);$0n.push("px;'>");$0n.push($o.client.html());$0n.push("</div></div>");$Z.innerHTML=$0n.join('');}else{var $0t=document.createElement("div");$0t.setAttribute("unselectable","on");$0t.className=$c.$1D("_event_inner");$0t.innerHTML=$o.client.html();$Z.appendChild($0t);};if($0d.rows[0].cells[$o.part.dayIndex]){var $0u=$0d.rows[0].cells[$o.part.dayIndex].firstChild;$0u.appendChild($Z);$c.makeChildrenUnselectable($Z);};$c.elements.events.push($Z);};this.makeChildrenUnselectable=function(el){var c=(el&&el.childNodes)?el.childNodes.length:0;for(var i=0;i<c;i++){try{var $0v=el.childNodes[i];if($0v.nodeType===1){$0v.unselectable='on';this.makeChildrenUnselectable($0v);}}catch(e){}}};this.drawEvents=function(){for(var i=0;i<this.columns.length;i++){var $0w=this.columns[i];for(var m=0;m<$0w.blocks.length;m++){var $03=$0w.blocks[m];for(var j=0;j<$03.lines.length;j++){var $06=$03.lines[j];for(var k=0;k<$06.length;k++){var e=$06[k];e.part.width=100/$03.lines.length;e.part.left=e.part.width*j;var $0x=(j===$03.lines.length-1);if(!$0x){e.part.width=e.part.width*1.5;};this.drawEvent(e);}}}}};this.drawTop=function(){this.nav.top=document.getElementById(this.id);this.nav.top.innerHTML='';if(this.cssOnly){DayPilot.Util.addClass(this.nav.top,this.$1D("_main"));}else{this.nav.top.style.lineHeight="1.2";this.nav.top.style.textAlign="left";};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.position='relative';this.nav.top.style.width=this.width?this.width:'100%';if(this.heightSpec==="Parent100Pct"){this.nav.top.style.height="100%";};if(this.hideUntilInit){this.nav.top.style.visibility='hidden';};this.nav.scroll=document.createElement("div");this.nav.scroll.style.height=this.getScrollableHeight()+"px";if(this.heightSpec==='BusinessHours'){this.nav.scroll.style.overflow="auto";}else{this.nav.scroll.style.overflow="hidden";};this.nav.scroll.style.position="relative";if(!this.cssOnly){this.nav.scroll.style.border="1px solid "+this.borderColor;this.nav.scroll.style.backgroundColor=this.hourNameBackColor;};var $0y=this.drawTopHeaderDiv();this.nav.top.appendChild($0y);this.nav.scroll.style.zoom=1;var $0z=this.drawScrollable();this.nav.scrollable=$0z.firstChild;this.nav.scroll.appendChild($0z);this.nav.top.appendChild(this.nav.scroll);this.nav.scrollLayer=document.createElement("div");this.nav.scrollLayer.style.position='absolute';this.nav.scrollLayer.style.top='0px';this.nav.scrollLayer.style.left='0px';this.nav.top.appendChild(this.nav.scrollLayer);this.nav.loading=document.createElement("div");this.nav.loading.style.position='absolute';this.nav.loading.style.top='0px';this.nav.loading.style.left=(this.hourWidth+5)+"px";this.nav.loading.style.backgroundColor=this.loadingLabelBackColor;this.nav.loading.style.fontSize=this.loadingLabelFontSize;this.nav.loading.style.fontFamily=this.loadingLabelFontFamily;this.nav.loading.style.color=this.loadingLabelFontColor;this.nav.loading.style.padding='2px';this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.display='none';this.nav.top.appendChild(this.nav.loading);};this.drawHourTable=function(){if(!this.fasterDispose)DayPilot.pu(this.nav.hourTable);this.nav.scrollable.rows[0].cells[0].innerHTML='';this.nav.hourTable=this.createHourTable();this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable);};this.drawScrollable=function(){var $0A=document.createElement("div");$0A.style.zoom=1;$0A.style.position='relative';var $0B=document.createElement("table");$0B.cellSpacing="0";$0B.cellPadding="0";$0B.border="0";$0B.style.border="0px none";$0B.style.width="100%";$0B.style.position='absolute';var r=$0B.insertRow(-1);var c;c=r.insertCell(-1);c.valign="top";c.style.padding='0px';c.style.border='0px none';this.nav.hourTable=this.createHourTable();c.appendChild(this.nav.hourTable);c=r.insertCell(-1);c.valign="top";c.width="100%";c.style.padding='0px';c.style.border='0px none';if(!this.cssOnly){c.appendChild(this.createEventsAndCells());}else{var $0z=document.createElement("div");$0z.style.position="relative";c.appendChild($0z);$0z.appendChild(this.createEventsAndCells());$0z.appendChild(this.$1E());};$0A.appendChild($0B);this.nav.zoom=$0A;return $0A;};this.createEventsAndCells=function(){var $0B=document.createElement("table");$0B.cellPadding="0";$0B.cellSpacing="0";$0B.border="0";$0B.style.width="100%";$0B.style.border="0px none";$0B.style.tableLayout='fixed';if(!this.cssOnly){$0B.style.borderLeft="1px solid "+this.borderColor;};this.nav.main=$0B;this.nav.events=$0B;return $0B;};this.$1E=function(){var $0B=document.createElement("table");$0B.style.top="0px";$0B.cellPadding="0";$0B.cellSpacing="0";$0B.border="0";$0B.style.position="absolute";$0B.style.width="100%";$0B.style.border="0px none";$0B.style.tableLayout='fixed';this.nav.events=$0B;var $0C=true;var $08=this.columns;var cl=$08.length;var r=($0C)?$0B.insertRow(-1):$0B.rows[0];for(var j=0;j<cl;j++){var c=($0C)?r.insertCell(-1):r.cells[j];if($0C){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $Z=document.createElement("div");$Z.style.marginRight=$c.columnMarginRight+"px";$Z.style.position='relative';$Z.style.height='1px';if(!this.cssOnly){$Z.style.fontSize='1px';$Z.style.lineHeight='1.2';};$Z.style.marginTop='-1px';c.appendChild($Z);}};return $0B;};this.createHourTable=function(){var $0B=document.createElement("table");$0B.cellSpacing="0";$0B.cellPadding="0";$0B.border="0";$0B.style.border='0px none';$0B.style.width=this.hourWidth+"px";$0B.oncontextmenu=function(){return false;};var $0D=this.cssOnly?0:1;if($0D){var r=$0B.insertRow(-1);r.style.height="1px";r.style.backgroundColor="white";var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';};var $0E=24;for(var i=0;i<$0E;i++){this.createHourRow($0B,i);};return $0B;};this.createHourRow=function($0B,i){var $h=(this.cellHeight*2);var r=$0B.insertRow(-1);r.style.height=$h+"px";var c=r.insertCell(-1);c.valign="bottom";c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.style.cursor="default";c.style.padding='0px';c.style.border='0px none';var $0F=document.createElement("div");$0F.style.position="relative";if(this.cssOnly){$0F.className=this.$1D("_rowheader");};$0F.style.width=this.hourWidth+"px";$0F.style.height=($h)+"px";$0F.style.overflow='hidden';$0F.unselectable='on';var $03=document.createElement("div");if(this.cssOnly){$03.className=this.$1D("_rowheader_inner");}else{$03.style.borderBottom="1px solid "+this.hourNameBorderColor;$03.style.textAlign="right";};$03.style.height=($h-1)+"px";$03.unselectable="on";var $0s=document.createElement("div");if(!this.cssOnly){$0s.style.padding="2px";$0s.style.fontFamily=this.hourFontFamily;$0s.style.fontSize=this.hourFontSize;$0s.style.color=this.hourFontColor;};$0s.unselectable="on";var $K=this.startDate.addHours(i);var $0q=$K.getHours();var am=$0q<12;if(this.timeFormat==="Clock12Hours"){$0q=$0q%12;if($0q===0){$0q=12;}};$0s.innerHTML=$0q;var $0G=document.createElement("span");$0G.unselectable="on";if(!this.cssOnly){$0G.style.fontSize="10px";$0G.style.verticalAlign="super";}else{$0G.className=this.$1D("_rowheader_minutes");};var $0H;if(this.timeFormat==="Clock12Hours"){if(am){$0H="AM";}else{$0H="PM";}}else{$0H="00";};if(!this.cssOnly){$0G.innerHTML="&nbsp;"+$0H;}else{$0G.innerHTML=$0H;};$0s.appendChild($0G);$03.appendChild($0s);$0F.appendChild($03);c.appendChild($0F);};this.getScrollableHeight=function(){switch(this.heightSpec){case "Full":return(24*2*this.cellHeight);case "BusinessHours":var $0I=this.businessHoursSpan();return $0I*this.cellHeight*2;default:throw "DayPilot.Calendar: Unexpected 'heightSpec' value.";}};this.drawTopHeaderDiv=function(){var $0y=document.createElement("div");if(!this.cssOnly){$0y.style.borderLeft="1px solid "+this.borderColor;$0y.style.borderRight="1px solid "+this.borderColor;};$0y.style.overflow="auto";var $0B=document.createElement("table");$0B.cellPadding="0";$0B.cellSpacing="0";$0B.border="0";$0B.style.width="100%";$0B.style.borderCollapse='separate';$0B.style.border="0px none";var r=$0B.insertRow(-1);var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';var $0J=this.drawCorner();c.appendChild($0J);this.nav.corner=$0J;c=r.insertCell(-1);c.style.width="100%";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.valign="top";c.style.position='relative';c.style.padding='0px';c.style.border='0px none';this.nav.header=document.createElement("table");this.nav.header.cellPadding="0";this.nav.header.cellSpacing="0";this.nav.header.border="0";this.nav.header.width="100%";this.nav.header.style.tableLayout="fixed";if(!this.cssOnly){this.nav.header.style.borderBottom="0px none #000000";this.nav.header.style.borderRight="0px none #000000";this.nav.header.style.borderLeft="1px solid "+this.borderColor;this.nav.header.style.borderTop="1px solid "+this.borderColor;};this.nav.header.oncontextmenu=function(){return false;};var $0K=this.nav.scroll.style.overflow!=='hidden';if(!this.cssOnly){if($0K){this.nav.header.style.borderRight="1px solid "+this.borderColor;}};c.appendChild(this.nav.header);if($0K){c=r.insertCell(-1);c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;c.style.borderTop="1px solid "+this.borderColor;c.style.borderBottom="0px none";c.style.borderLeft="0px none";c.style.borderRight="0px none";c.style.padding='0px';c.style.verticalAlign='top';c.innerHTML="&nbsp;";};var $0n=document.createElement("div");$0n.unselectable="on";$0n.style.position="relative";$0n.style.width="16px";if(!this.cssOnly){$0n.style.lineHeight="1px";$0n.style.fontSize="1px";$0n.style.height="1px";}else{$0n.style.height=this.headerHeight+"px";$0n.className=this.$1D("_cornerright");var $0t=document.createElement("div");$0t.className=this.$1D('_cornerright_inner');$0n.appendChild($0t);};c.appendChild($0n);this.nav.cornerRight=$0n;};$0y.appendChild($0B);return $0y;};this.drawCorner=function(){var $0z=document.createElement("div");$0z.style.position='relative';if(this.cssOnly){$0z.className=this.$1D("_corner");}else{$0z.style.backgroundColor=this.hourNameBackColor;$0z.style.fontFamily=this.headerFontFamily;$0z.style.fontSize=this.headerFontSize;$0z.style.color=this.headerFontColor;$0z.style.borderTop="1px solid "+this.borderColor;};$0z.style.width=this.hourWidth+"px";$0z.style.height=this.headerHeight+"px";$0z.oncontextmenu=function(){return false;};var $0J=document.createElement("div");$0J.unselectable="on";if(this.cssOnly){$0J.className=this.$1D("_corner_inner");};$0z.appendChild($0J);return $0z;};this.disposeMain=function(){var $0B=this.nav.main;$0B.root=null;$0B.onmouseup=null;for(var y=0;y<$0B.rows.length;y++){var r=$0B.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.root=null;c.onmousedown=null;c.onmousemove=null;c.onmouseout=null;c.onmouseup=null;}};if(!this.fasterDispose)DayPilot.pu($0B);};this.drawMain=function(){var $0L=[];var $0M=[];var $0B=this.nav.main;var $N=30*60*1000;var $0N=this.rowCount();var $08=$c.columns;var $0C=!this.tableCreated||$08.length!==$0B.rows[0].cells.length||$0N!==$0B.rows.length;if($0B){this.disposeMain();}while($0B&&$0B.rows&&$0B.rows.length>0&&$0C){if(!this.fasterDispose){DayPilot.pu($0B.rows[0]);};$0B.deleteRow(0);};this.tableCreated=true;var cl=$08.length;if(!this.cssOnly){var r=($0C)?$0B.insertRow(-1):$0B.rows[0];if($0C){r.style.backgroundColor='white';};for(var j=0;j<cl;j++){var c=($0C)?r.insertCell(-1):r.cells[j];if($0C){c.style.padding='0px';c.style.border='0px none';c.style.height='1px';c.style.overflow='visible';c.style.width=(100.0/$08.length)+"%";var $Z=document.createElement("div");$Z.style.display='block';$Z.style.marginRight=$c.columnMarginRight+"px";$Z.style.position='relative';$Z.style.height='1px';$Z.style.fontSize='1px';$Z.style.lineHeight='1.2';$Z.style.marginTop='-1px';c.appendChild($Z);}}};for(var i=0;i<$0N;i++){var $0D=this.cssOnly?0:1;var r=($0C)?$0B.insertRow(-1):$0B.rows[i+$0D];if($0C){r.style.MozUserSelect='none';r.style.KhtmlUserSelect='none';};for(var j=0;j<cl;j++){var $0w=this.columns[j];var c=($0C)?r.insertCell(-1):r.cells[j];c.start=$0w.Start.addTime(i*$N);c.end=c.start.addTime($N);c.onmousedown=this.onCellMousedown;c.onmousemove=this.mousemove;c.onmouseup=function(){return false;};c.onclick=function(){return false;};if($0C){c.root=this;c.style.padding='0px';c.style.border='0px none';c.style.verticalAlign='top';if(!this.cssOnly){if(j!==cl-1){c.style.borderRight='1px solid '+$c.cellBorderColor;}};c.style.height=$c.cellHeight+'px';c.style.overflow='hidden';c.unselectable='on';if(!this.cssOnly){var $Z=document.createElement("div");$Z.unselectable='on';$Z.style.fontSize='1px';$Z.style.height='0px';var $0O=(c.end.getMinutes()+c.end.getSeconds()+c.end.getMilliseconds())>0;if($0O){if($c.hourHalfBorderColor!==''){$Z.style.borderBottom='1px solid '+$c.hourHalfBorderColor;}}else{if($c.hourBorderColor!==''){$Z.style.borderBottom='1px solid '+$c.hourBorderColor;}};var $0P=document.createElement("div");$0P.style.height=($c.cellHeight-1)+"px";$0P.style.overflow='hidden';$0P.unselectable='on';c.appendChild($0P);}else{var $Z=document.createElement("div");$Z.unselectable='on';$Z.style.height=$c.cellHeight+"px";$Z.style.position="relative";$Z.className=this.$1D("_cell");var $0Q=this.$1F(c.start,c.end);if($0Q&&this.cssOnly){DayPilot.Util.addClass($Z,$c.$1D("_cell_business"));};var $0t=document.createElement("div");$0t.setAttribute("unselectable","on");$0t.className=this.$1D("_cell_inner");$Z.appendChild($0t);c.appendChild($Z);};c.appendChild($Z);};c.style.backgroundColor=$c.cellBackColor;$0P=c.firstChild;}};$0B.onmouseup=this.mouseup;$0B.root=this;$c.nav.scrollable.onmousemove=function(ev){ev=ev||window.event;var $0R=$c.nav.scrollable;$c.coords=DayPilot.mo3($0R,ev);var $00=DayPilot.mc(ev);if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizingShadow=$c.createShadow(DayPilotCalendar.resizing,false,$c.shadow);};var $0S=$c.cellHeight;var $J=1;var $0T=($00.y-DayPilotCalendar.originalMouse.y);if(DayPilotCalendar.resizing.dpBorder==='bottom'){var $0U=Math.floor(((DayPilotCalendar.originalHeight+DayPilotCalendar.originalTop+$0T)+$0S/ 2)/ $0S)*$0S-DayPilotCalendar.originalTop+$J;if($0U<$0S)$0U=$0S;var $07=$c.nav.main.clientHeight;if(DayPilotCalendar.originalTop+$0U>$07)$0U=$07-DayPilotCalendar.originalTop;DayPilotCalendar.resizingShadow.style.height=($0U-4)+'px';}}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.movingShadow=$c.createShadow(DayPilotCalendar.moving,!$c.ie,$c.shadow);DayPilotCalendar.movingShadow.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};if(!$c.coords){return;};var $0S=$c.cellHeight;var $J=1;var $0k=DayPilotCalendar.moveOffsetY;if(!$0k){$0k=$0S/2;};var $0V=Math.floor((($c.coords.y-$0k-$J)+$0S/ 2)/ $0S)*$0S+$J;if($0V<$J){$0V=$J;};var $0d=$c.nav.events;var $07=$c.nav.main.clientHeight;var $h=parseInt(DayPilotCalendar.movingShadow.style.height);if($0V+$h>$07){$0V=$07-$h;};DayPilotCalendar.movingShadow.parentNode.style.display='none';DayPilotCalendar.movingShadow.style.top=$0V+'px';DayPilotCalendar.movingShadow.parentNode.style.display='';var $0W=$0d.clientWidth/$0d.rows[0].cells.length;var $l=Math.floor(($c.coords.x-45)/$0W);if($l<0){$l=0;};if($l<$0d.rows[0].cells.length&&$l>=0&&DayPilotCalendar.movingShadow.column!==$l){DayPilotCalendar.movingShadow.column=$l;DayPilotCalendar.moveShadow($0d.rows[0].cells[$l]);}}};$c.nav.scrollable.style.display='';};this.$1F=function($K,end){if(this.businessBeginsHour<this.businessEndsHour){return !($K.getHours()<this.businessBeginsHour||$K.getHours()>=this.businessEndsHour||$K.getDayOfWeek()===6||$K.getDayOfWeek()===0);};if($K.getHours()>=this.businessBeginsHour){return true;};if($K.getHours()<this.businessEndsHour){return true;};return false;};this.disposeHeader=function(){var $0B=this.nav.header;if($0B&&$0B.rows){for(var y=0;y<$0B.rows.length;y++){var r=$0B.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.onclick=null;c.onmousemove=null;c.onmouseout=null;}}};if(!this.fasterDispose)DayPilot.pu($0B);};this.drawHeaderRow=function($0C){var r=($0C)?this.nav.header.insertRow(-1):this.nav.header.rows[0];var $08=this.columns;var $0X=$08.length;for(var i=0;i<$0X;i++){var $o=$08[i];var $d=($0C)?r.insertCell(-1):r.cells[i];$d.data=$o;$d.style.overflow='hidden';$d.style.padding='0px';$d.style.border='0px none';$d.style.height=(this.headerHeight)+"px";var $Z=($0C)?document.createElement("div"):$d.firstChild;if($0C){$Z.unselectable='on';$Z.style.MozUserSelect='none';$Z.style.backgroundColor=$o.BackColor;$Z.style.cursor='default';$Z.style.position='relative';if(!this.cssOnly){$Z.style.fontFamily=this.headerFontFamily;$Z.style.fontSize=this.headerFontSize;$Z.style.color=this.headerFontColor;if(i!==$0X-1){$Z.style.borderRight="1px solid "+this.borderColor;}}else{$Z.className=$c.$1D('_colheader');};$Z.style.height=this.headerHeight+"px";var $0s=document.createElement("div");if(!this.cssOnly){$0s.style.position='absolute';$0s.style.left='0px';$0s.style.width='100%';$0s.style.padding="2px";$Z.style.textAlign='center';}else{$0s.className=$c.$1D('_colheader_inner');};$0s.unselectable='on';$Z.appendChild($0s);$d.appendChild($Z);};var $0s=$Z.firstChild;$0s.innerHTML=$o.InnerHTML;}};this.widthUnit=function(){if(this.width&&this.width.indexOf("px")!==-1){return "Pixel";};return "Percentage";};this.drawHeader=function(){var $0y=this.nav.header;var $0C=true;var $08=this.columns;var $0X=$08.length;if(this.headerCreated&&$0y&&$0y.rows&&$0y.rows.length>0){$0C=$0y.rows[$0y.rows.length-1].cells.length!==$0X;}while(this.headerCreated&&$0y&&$0y.rows&&$0y.rows.length>0&&$0C){if(!this.fasterDispose)DayPilot.pu($0y.rows[0]);$0y.deleteRow(0);};this.headerCreated=true;if(!$0C){var $0J=$c.nav.corner;if(!this.cssOnly){$0J.style.backgroundColor=$c.cornerBackColor;};if(!this.fasterDispose)DayPilot.pu($0J.firstChild);};this.drawHeaderRow($0C);};this.loadingStart=function(){if(this.loadingLabelVisible){this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.top=(this.headerHeight+5)+"px";this.nav.loading.style.display='';}};this.commandCallBack=function($0Y,$o){var $G={};$G.command=$0Y;this.callBack2('Command',$o,$G);};this.loadingStop=function($0Z){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.nav.loading.style.display='none';};this.enableScrolling=function(){var $10=this.nav.scroll;if(!this.initScrollPos)return;$10.root=this;if($10.scrollTop===0){$10.scrollTop=this.initScrollPos;}};this.callbackError=function($z,$A){alert("Error!\r\nResult: "+$z+"\r\nContext:"+$A);};this.fixScrollHeader=function(){var w=DayPilot.sw(this.nav.scroll);var d=this.nav.cornerRight;if(d&&w>0){if(this.cssOnly){d.style.width=w+'px';}else{d.style.width=(w-3)+'px';}}};this.registerGlobalHandlers=function(){if(!DayPilotCalendar.globalHandlers){DayPilotCalendar.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotCalendar.gMouseUp);DayPilot.re(window,'unload',DayPilotCalendar.gUnload);}};this.events={};this.events.list=[];this.events.add=function(e){e.calendar=$c;if(!$c.events.list){$c.events.list=[];};$c.events.list.push(e.data);$c.update();};this.events.update=function(e){e.commit();$c.update();};this.events.remove=function(e){var $11=DayPilot.indexOf($c.events.list,e.data);$c.events.list.splice($11,1);$c.update();};this.update=function(){$c.prepareVariables();$c.deleteEvents();var $12=true;if($12){$c.prepareColumns();$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.loadEvents();$c.updateHeaderHeight();$c.show();$c.drawEvents();$c.clearSelection();};this.loadEvents=function($13){if(!$13){$13=this.events.list;};var length=$13.length;var $14=24*60*60*1000;this.cache.pixels={};var $15=[];this.scrollLabels=[];this.minStart=10000;this.maxEnd=0;if(!$13){return;};for(var i=0;i<length;i++){var e=$13[i];e.start=new DayPilot.Date(e.start);e.end=new DayPilot.Date(e.end);};var $16=this.startDate;var $17=this.startDate.addDays(this.days);for(var i=0;i<this.columns.length;i++){var scroll={};scroll.minEnd=1000000;scroll.maxStart=-1;this.scrollLabels.push(scroll);var $0w=this.columns[i];$0w.events=[];$0w.lines=[];$0w.blocks=[];var $M=new DayPilot.Date($0w.Start);var $18=$M.getTime();var $19=$M.addTime($14);var $1a=$19.getTime();for(var j=0;j<length;j++){if($15[j]){continue;};var e=$13[j];var $K=e.start;var end=e.end;var $1b=$K.getTime();var $1c=end.getTime();if($1c<$1b){continue;};var $1d=!($1c<=$18||$1b>=$1a);if($1d){var ep=new DayPilot.Event(e,$c);ep.part.dayIndex=i;ep.part.start=$18<$1b?e.start:$M;ep.part.end=$1a>$1c?e.end:$19;var $1e=this.getPixels(ep.part.start,$0w.Start);var $1f=this.getPixels(ep.part.end,$0w.Start);var top=$1e.top;var $1g=$1f.top;if(top===$1g&&($1e.cut||$1f.cut)){continue;};var $1h=$1f.boxBottom;ep.part.top=Math.floor(top/this.cellHeight)*this.cellHeight;if(!this.cssOnly){ep.part.top+=1;};ep.part.height=Math.max(Math.ceil($1h/this.cellHeight)*this.cellHeight-ep.part.top,this.cellHeight-1)+1;var $K=ep.part.top;var end=ep.part.top+ep.part.height;if($K>scroll.maxStart){scroll.maxStart=$K;};if(end<scroll.minEnd){scroll.minEnd=end;};if($K<this.minStart){this.minStart=$K;};if(end>this.maxEnd){this.maxEnd=end;};$0w.events.push(ep);if(ep.part.start.getTime()===$1b&&ep.part.end.getTime()===$1c){$15[j]=true;}}}};for(var i=0;i<this.columns.length;i++){var $0w=this.columns[i];$0w.events.sort(this.eventComparer);for(var j=0;j<$0w.events.length;j++){var e=$0w.events[j];$0w.putIntoBlock(e);};for(var j=0;j<$0w.blocks.length;j++){var $03=$0w.blocks[j];$03.events.sort(this.eventComparer);for(var k=0;k<$03.events.length;k++){var e=$03.events[k];$03.putIntoLine(e);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.Start||!b.Start){return 0;};var $1i=a.Start.getTime()-b.Start.getTime();if($1i!==0){return $1i;};var $1j=b.End.getTime()-a.End.getTime();return $1j;};this.debug=function($0Z,$1k){if(!this.debuggingEnabled){return;};if(!$c.debugMessages){$c.debugMessages=[];};$c.debugMessages.push($0Z);if(typeof console!=='undefined'){console.log($0Z);}};this.getPixels=function($T,$K){if(!$K)$K=this.startDate;var $1b=$K.getTime();var $1l=$T.getTime();var $1m=this.cache.pixels[$1l+"_"+$1b];if($1m){return $1m;};$1b=$K.getTime();var $1n=30*60*1000;var $1o=$1l-$1b;var $1p=$1o%$1n;var $1q=$1o-$1p;var $1r=$1q+$1n;if($1p===0){$1r=$1q;};var $z={};$z.cut=false;$z.top=this.ticksToPixels($1o);$z.boxTop=this.ticksToPixels($1q);$z.boxBottom=this.ticksToPixels($1r);this.cache.pixels[$1l+"_"+$1b]=$z;return $z;};this.ticksToPixels=function($1l){return Math.floor((this.cellHeight*$1l)/(1000*60*30));};this.prepareVariables=function(){this.startDate=new DayPilot.Date(this.startDate);};this.updateHeaderHeight=function(){if(this.nav.corner){this.nav.corner.style.height=this.headerHeight+"px";}};this.updateHeight=function(){var sh=this.getScrollableHeight();if(this.nav.scroll&&sh>0){this.nav.scroll.style.height=sh+"px";}};this.$1G=function(){if(this.backendUrl||typeof WebForm_DoCallback==='function'){return(typeof $c.events.list==='undefined')||(!$c.events.list);}else{return false;}};this.show=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.initShort=function(){this.prepareVariables();this.prepareColumns();this.drawTop();this.drawHeader();this.drawMain();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);this.callBack2('Init');};this.init=function(){var $1s=this.$1G();loadDefaultCss();if($1s){this.initShort();return;};this.prepareVariables();this.prepareColumns();if(this.events){this.loadEvents();};this.drawTop();this.drawHeader();this.drawMain();this.show();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);if(this.events){this.updateHeaderHeight();this.drawEvents();};this.afterRender(null,false);};this.Init=this.init;};DayPilotCalendar.Cell=function($K,end,$l){this.start=$K;this.end=end;this.column=function(){};};DayPilotCalendar.Column=function($1t,name,$T){this.value=$1t;this.name=name;this.date=new DayPilot.Date($T);};DayPilotCalendar.Event=function($u,$c){$u.event=this;var ev=this;this.div=$u;this.root=$c;this.calendar=$c;this.value=function(){return $u.data.id;};this.id=function(){return $u.data.id;};this.text=function(){return $u.data.Text;};this.start=function(){return $u.data.Start;};this.end=function(){return $u.data.End;};this.partStart=function(){return $u.data.PartStart;};this.partEnd=function(){return $u.data.PartEnd;};this.innerHTML=function(){var c=$u.getElementsByTagName("DIV");return c[c.length-1].innerHTML;};this.toJSON=function($1u){var $1v={};$1v.value=this.value();$1v.text=this.text();$1v.start=this.start();$1v.end=this.end();return $1v;};};DayPilot.Calendar=DayPilotCalendar.Calendar;if(typeof jQuery==='undefined'){return;};(function($){$.fn.daypilotCalendar=function($1w){var $1x=null;var j=this.each(function(){if(this.daypilot){return;};var $1y=new DayPilot.Calendar(this.id);this.daypilot=$1y;for(name in $1w){$1y[name]=$1w[name];};$1y.Init();if(!$1x){$1x=$1y;}});if(this.length===1){return $1x;}else{return j;}};})(jQuery);})();


